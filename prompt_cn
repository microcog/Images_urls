原始prompt详见：https://github.com/microcog/QA_ToT_pipeline/blob/master/generate_QA_pairs.py
————————————Start Generating——————————————
### **输入信息**：
1. 当前视频帧代表了当前视频片段的内容。  
2. 历史标题和摘要来自先前的视频片段，为本片段提供参考信息。  

### **任务描述**：
你是一位在视频理解领域具备高级视觉和情境分析能力的专家。你的工作是分析并连接多个视频片段的信息，生成跨时间的问答（QA）对。请完成以下任务：

### **任务 1**：理解当前片段
- 将所提供的关键帧视作视频画面，与历史标题和摘要结合起来，完整理解当前视频片段的内容。  
- 避免使用“从图像”“图片”或“帧编号”等字眼。

### **任务 2**：生成本片段标题
- 为当前视频片段创建一个简洁且准确的标题。  
- 在存在时间关联的情况下，可参考历史标题。

### **任务 3**：生成两个层级的 QA 问答
#### 第一级：基础问答对
- **定义**：基于当前视频内容直接提出问题。  
- **特征**：无需历史背景或推理；答案应当能从当前视频中直接观察或推断。  
- **标签**：[Actions]（动作），[Objects]（物体），[Environment]（环境），[Attributes]（属性），[Current State Reasoning]（当前状态推理）。  
- **数量**：3 组问答对。

#### 第二级：跨时间和复杂问答对
**定义**：探讨当前视频与历史摘要间关系的问题。  
**特征**：  
  - 必须使用历史摘要的信息来构造问题和答案。  
  - 不可依赖通用常识，所有内容必须基于所提供的信息。  
**标签**：  
基于历史摘要的背景信息来进行：
[Co-reference]：识别当前视频和历史视频中同一对象的身份，即使姿态、外观、遮挡、镜头或时间间隔都有改变。示例：“远处那栋建筑在之前的视频里是什么样？”“视频里这个女性是否就是之前片段里的那个小女孩？”  
[Temporal Perception]：推断动作及其交互的时间顺序，并基于历史和当前片段的事件顺序进行回答，包括“在……之前/之后……”“现在……”或“接下来会发生什么”。示例：“在开始跑之前，那个人做了什么？”“她摔倒后，她旁边的人在做什么？”  
[Causality]：解释当前事件的原因或后果，以及背后可能的意图。这类问题包括“为什么”“怎样导致了某结果”。示例：“为什么航班会延误？”“视频开头的那场火灾最后导致了什么结果？”  
[Intention]：探究当前视频中某人行为背后的目的（意图、需求或外部因素）。示例：“他为什么辞职？”“如何理解这个男人的行为？”  
[Summary]：注重提炼话题或事件的核心要点，聚焦整体概况而非细节。示例：“化学实验的主要步骤是什么？”“这次会议的核心议题是什么？”  
[Reasoning]：强调在视频情境下基于证据或事实的逻辑推断或结论。示例：“根据她的反应可以得出什么结论？”  
[Analysis]：基于视频的历史信息，深入研究当前片段中重要事件的原因、结构或意义，用于探究片段事件的更多细节。示例：“故事情节的转折点是什么？”“婚姻如何改变了主持人的生活？”  
[Prediction]：根据视频的历史信息，预测当前片段事件可能的未来结果或趋势。答案必须有数据支撑或合理逻辑。示例：“根据这些数据，哪些地区将来可能会面临严重干旱？”  
**数量**：5 组问答对。

### **任务 4**：完善问答对
- 确保问题简明，不包含暗示或部分答案。  
- 避免过度正式的表达以及“也许”“可能”“大概”等用语。  
- 确保所有问答对具体、准确且无歧义。

### **输出格式**：
请以如下 JSON 格式输出：
```json
{format}

开始生成：
历史标题：{history[0]}
历史摘要：{history[1]}
视频关键帧：'''


———————————Last Segment Generating———————————————
### **输入信息**：
1. 目前提供的视频画面代表了当前视频片段的内容。  
2. 历史上下文包含了每个之前视频片段的标题与内容摘要。

### **任务描述**：
你是一位在视频理解领域拥有深度视觉和情境分析能力的专家，你的职责是综合当前视频片段和历史上下文的信息，进行解读与整合，形成具有价值的洞察。具体来说，你需要针对当前视频片段创建**全局与复杂的问答（QA）对**。

以下是你需要完成的三个任务：

#### **任务 1：理解当前视频片段**  
- 使用当前片段提供的关键帧，以及历史标题和摘要，将关键帧视作视频内容的表达。  
- 避免使用诸如“图像”、“图片”或“帧编号”之类的专业技术术语，重点是对视频内容进行整体理解。  

#### **任务 2：生成全局与复杂的 QA 问答对**  
- **定义**：全局与复杂推理问题需要多步骤分析，并在当前和历史内容之间进行全面整合。关注推理的深度，而非问题本身的篇幅。  
- **关键特征**：  
  - **参考上下文**：问题应聚焦于当前视频片段，答案需要结合历史摘要与当前内容。  
  - **避免常识知识**：所有 QA 问答必须直接基于所提供的内容，不可依赖外部或假定的知识。  
  - **QA 标签**：  
    - **[Global Analysis]（全局分析）**：需要对复杂话题或事件进行深入剖析，从而理解其结构、功能或意义的问题。  
    - **[Video Overall Summary]（视频整体总结）**：基于当前和历史数据，对结果或趋势进行预测的问题。  
    - **[Highlights Grounding]（重点聚焦）**：突出视频中关键时刻或元素以深入探究的问题。  
  - **数量**：生成 3 组问答对。  

#### **任务 3：完善 QA 问答对**  
- 确保所有问答对满足以下要求：  
  - **简洁性**：问题应直接明了，避免出现部分答案或多余的表达。  
  - **具体性**：避免模糊或过于宽泛的问题。问题必须明确且紧密围绕所提供的内容。  
  - **清晰度**：避免使用“X 与 Y 之间的关系如何”此类形式化或抽象的问题，将其替换为更具体的表述。  
  - **确定性**：避免使用“可能”、“也许”或“大概”等词汇，确保问答清晰且具有确定性。  

#### **输出格式（JSON）**：{format}

#### **开始生成**：  
历史上下文：{Global}  
视频关键帧：

———————re-modify(去冗余/提高质量)———————
**任务：** 请根据以下规则对原有问答（QA）对进行重新修改（标签必须保持不变）：
- 移除问题中所有暗示性或部分答案的信息。
- 确保所有问题和答案都仅依据当前或之前视频情境中直接呈现的内容，不要加入任何常识性推断。
- 保持所有问答的准确性和针对性，去除“可能”“也许”“大概”等推测性语言，避免任何不确定的表述。
- 将视频内容视为一个连续的事件流，避免明确提及片段或顺序，例如使用“在视频的早些时候”或“在前一个片段”等字眼。
- 提升问题的清晰度和质量，使其更加直接自然，避免过于正式的表达（如“How...relate to/connect to...”之类），使问题更具体。

**示例**：
原问题：What events in the earlier video influenced the current shopping behavior?  
修订后：What event led to the shopping behavior shown in the video?  
原问题：How does the rush for goods relate to the snowstorm mentioned in the previous segment?  
修订后：What happened before people snapped up goods?

**输出格式（JSON）**：{format}  
输入：{qa_pairs}

